.. .. documentation master file, created by
   sphinx-quickstart on Mon Jun 22 21:29:02 2015.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Welcome to pyWAD's documentation!
==============================

The pywad package consists of tools, plugins that can be used to analyze
qc images generated by medical imaging modalities.

The figure below shows how the pywad package fits into
the overall WAD QC framework.

.. image:: overview.jpeg
   :scale: 50 %


Getting Started
---------------

.. include:: ../GettingStarted.txt


Configuration files
-------------------

A plugin is a piece of code that performs a specific action on a data class object. To use a specific plugin to analyse a given data object a configuration file has to be specified and uploaded in the WAD QC software. 
A configuration file defines one or multiple actions to be executed. Each action is defined by specifying a plugin and the function to be executed from that plugin. Also a default_level page on which the results of the analysis will be published has to be specified.

Optionally, the following tags can be specified:


 * filters - specify specific dicom tag (names) and values that should be used to filter the data before analysis
 * limits - specify limits for specific parameters to be determined
 * params - all tags in the params block will be passed on to the defined plugin and the information contained can be used by the plugin.

The pywad package comes with a simple test plugin and corresponding configuration file:

.. code-block:: rest 
   :linenos:

    <config>
    <action>
        <plugin>Plugin_development.TestPlugin.myplugin</plugin>
        <function>testFunction</function>
        <default_level>1</default_level>
        
        <filters>
            <tag name="SeriesDescription">Flat Field</tag> <!-- Typical format -->
            <tag name="0x008,0x1030">Weekly QC</tag> <!-- Test DICOM hexadecimal tuple -->
            <tag name="ExposureTime">650</tag> <!-- Test dicom.valuerep.IS -->
            <tag name="HalfValueLayer">0.351</tag> <!-- Test dicom.valuerep.DSfloat -->
            <tag name="Rows">4096</tag> <!-- Test integer value -->
        </filters>
       

    
        <limits>
            <result description="Study date">
                <acc_low>100</acc_low>
                <acc_high>500</acc_high>
                <crit_low>0</crit_low>
                <crit_high>1000</crit_high>
            </result>
            <result description="StudyDescription">
                <criterium>Weekly QC</criterium>
            </result>
        </limits>
    </action>
    
    <action>
        <plugin>Plugin_development.TestPlugin.myplugin</plugin>
        <function>anotherFunction</function>
        
        <limits>
            <result description="Some bool">
                 <criterium>1</criterium>
             </result>
        </limits>

       <params>
            <some_parameter SomeAttribute="Some attribute text">This is some parameter!</some_parameter>
            <parent NumberOfKids="2">
                <child>This is child 1</child>
                <child>This is child 2</child>
            </parent>
        </params>
        
    </action>
</config>


Testing plugins
---------------

Tools
-----


Contents
========

.. toctree::
     :caption: Table of Contents
     :numbered: 1
     :maxdepth: 6
     :glob:
   pywad2

Credits
=======

.. include:: ../CREDITS.txt

Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`

